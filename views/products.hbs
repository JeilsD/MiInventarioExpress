<h2>{{title}}</h2>

<a href="/products/new" style="font-size: 1.2em; padding: 10px; background-color: green; color: white; text-decoration: none;">
    + Cargar Nuevo Producto
</a>

<hr style="margin-top: 20px;">

{{! Verificamos si la lista 'products' que pasó el controlador tiene items }}
{{#if products}}
    <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px;">
        
        {{! Hacemos un bucle por cada producto en la lista }}
        {{#each products}}
        <div style="border: 1px solid #ccc; padding: 15px; border-radius: 5px; width: 250px; display: flex; flex-direction: column; justify-content: space-between;">
            
            <div>
                <h3>{{this.nombre}}</h3>
                
                <p><strong>Precio:</strong> ${{this.precio}}</p>
                
                <p>{{this.descripcion}}</p>
    
                <img 
                    src="{{this.imagen}}" 
                    alt="Imagen de {{this.nombre}}" 
                    style="width: 100%; height: auto; max-height: 200px; object-fit: cover;"
                >
            </div>

            {{! --- AÑADIDO: Botones de Editar y Borrar --- }}
            <div style="margin-top: 15px; display: flex; justify-content: space-between; align-items: center;">
                
                <a 
                    href="/products/{{this._id}}/edit" 
                    style="text-decoration: none; padding: 5px 10px; background-color: #007bff; color: white; border-radius: 3px;"
                >
                    Editar
                </a>
                
                <form action="/products/{{this._id}}/delete" method="POST" style="margin: 0;">
                    <button 
                        type="submit" 
                        style="padding: 5px 10px; background-color: #dc3545; color: white; border: none; border-radius: 3px; cursor: pointer;"
                        onclick="return confirm('¿Estás seguro de que quieres eliminar este producto?');"
                    >
                        Borrar
                    </button>
                </form>
            </div>
            {{! --- FIN DE LO AÑADIDO --- }}

        </div>
        {{/each}}

    </div>
{{else}}
    {{! Esto se muestra si no hay productos en la base de datos }}
    <p style="margin-top: 20px;">No hay productos en el inventario. ¡Crea el primero!</p>
{{/if}}